<html>
<head>
    <script type="text/javascript"  src="go.js" charset="UTF-8"></script>
    <script type="text/javascript"  src="resources-client.js" charset="UTF-8"></script>

</head>
   <!-- The DIV for a Diagram needs an explicit size or else we will not see anything.
    In this case we also add a background color so we can see that area. -->
    <div id="myDiagramDiv" style="width:1500px; height:700px; background-color: #DAE4E4;"></div>

    <script >

        var $ = go.GraphObject.make;
        var myDiagram = $(go.Diagram, "myDiagramDiv",{ "undoManager.isEnabled": true });

/*
    GridLayout
    TreeLayout
    ForceDirectedLayout
    LayeredDigraphLayout
    CircularLayout
*/

        myDiagram.layout = new go.LayeredDigraphLayout();

        myDiagram.nodeTemplate = $(
            go.Node, "Auto",
            $(go.Shape,"RoundedRectangle",{ width: 140, height: 40, margin: 4, fill: null }),
            $(go.TextBlock, new go.Binding("text", "name"))
            );

        myDiagram.linkTemplate =
            $(go.Link,
            $(go.Shape)
            );

        myDiagram.groupTemplate =
        $(go.Group, "Auto", { layout: $(go.TreeLayout) , isSubGraphExpanded : false },
            $(go.Shape, "Rectangle", { fill: "orange", stroke: "darkorange" }),
            $(go.Panel, "Table",{ margin: 0.5 },
                $(go.RowColumnDefinition, { row: 0, background: "white" }),
                    $("SubGraphExpanderButton", { row: 0, column: 0, margin: 3 }),
                $(go.TextBlock,
                    { row: 0, column: 1,
                    font: "bold 14px Sans-Serif",
                    stroke: "darkorange",
                    textAlign: "center",
                    stretch: go.GraphObject.Horizontal },
                    new go.Binding("text", "name")),
                $(go.Placeholder,
                    { row: 1, columnSpan: 2,
                    padding: 10, alignment: go.Spot.TopLeft },
                    new go.Binding("padding", "isSubGraphExpanded", function(exp) { return exp ? 10 : 0; } ).ofObject())
            )
        );

        myDiagram.model = new go.GraphLinksModel(getSQL("/getobj"), getSQL("/getrel"));



    </script>

</html>
