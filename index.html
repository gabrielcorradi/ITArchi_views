<html>
<head>
    <script type="text/javascript"  src="go.js" charset="UTF-8"></script>
</head>
   <!-- The DIV for a Diagram needs an explicit size or else we will not see anything.
    In this case we also add a background color so we can see that area. -->
    <div id="myDiagramDiv" style="width:800px; height:300px; background-color: #DAE4E4;"></div>

    <script >

        var $ = go.GraphObject.make;
        var myDiagram = $(go.Diagram, "myDiagramDiv",{ "undoManager.isEnabled": true });

        var myModel = $(go.GraphLinksModel);

        myDiagram.nodeTemplate = $(
            go.Node, "Auto",
            $(go.Shape,"RoundedRectangle",{ width: 140, height: 40, margin: 4, fill: null }),
            $(go.TextBlock, new go.Binding("text", "name"))
            );

        myModel.nodeDataArray = getSQL("/read");

        myDiagram.model = myModel;

        function getSQL(url){
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open( "GET", url, false ); // false for synchronous request
            xmlHttp.send( null );
            var obj = JSON.parse(xmlHttp.responseText);
            console.log(obj);

            return obj;
        }

    </script>

</html>
